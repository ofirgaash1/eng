import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useEffect } from "react";
import { usePrefsStore } from "../../state/prefsStore";
export default function SettingsPage() {
    const subtitleStyle = usePrefsStore((state) => state.prefs.subtitleStyle);
    const highlightColors = usePrefsStore((state) => state.prefs.highlightColors);
    const updateStyle = usePrefsStore((state) => state.updateSubtitleStyle);
    const updateHighlights = usePrefsStore((state) => state.updateHighlightColors);
    const initialized = usePrefsStore((state) => state.initialized);
    const initialize = usePrefsStore((state) => state.initialize);
    useEffect(() => {
        if (!initialized) {
            void initialize();
        }
    }, [initialized, initialize]);
    const handleNumberChange = (event, key) => {
        const value = Number(event.target.value);
        if (Number.isFinite(value)) {
            void updateStyle({ [key]: key === "lineHeight" ? Number(value.toFixed(2)) : value });
        }
    };
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("section", { className: "space-y-4", children: [_jsx("h2", { className: "text-xl font-semibold", children: "Subtitle Appearance" }), _jsxs("div", { className: "grid gap-4 md:grid-cols-2", children: [_jsxs("label", { className: "flex flex-col gap-2 text-sm", children: [_jsx("span", { className: "text-white/70", children: "Font family" }), _jsx("input", { type: "text", value: subtitleStyle.fontFamily, onChange: (event) => void updateStyle({ fontFamily: event.target.value }), className: "rounded-md border border-white/10 bg-black/40 px-3 py-2 text-white focus:border-white/40 focus:outline-none" })] }), _jsxs("label", { className: "flex flex-col gap-2 text-sm", children: [_jsx("span", { className: "text-white/70", children: "Font size (px)" }), _jsx("input", { type: "number", min: 16, max: 96, value: subtitleStyle.fontSizePx, onChange: (event) => handleNumberChange(event, "fontSizePx"), className: "rounded-md border border-white/10 bg-black/40 px-3 py-2 text-white focus:border-white/40 focus:outline-none" })] }), _jsxs("label", { className: "flex flex-col gap-2 text-sm", children: [_jsx("span", { className: "text-white/70", children: "Font weight" }), _jsx("input", { type: "number", min: 300, max: 900, step: 100, value: subtitleStyle.fontWeight, onChange: (event) => handleNumberChange(event, "fontWeight"), className: "rounded-md border border-white/10 bg-black/40 px-3 py-2 text-white focus:border-white/40 focus:outline-none" })] }), _jsxs("label", { className: "flex flex-col gap-2 text-sm", children: [_jsx("span", { className: "text-white/70", children: "Line height" }), _jsx("input", { type: "number", min: 1, max: 2, step: 0.05, value: subtitleStyle.lineHeight, onChange: (event) => handleNumberChange(event, "lineHeight"), className: "rounded-md border border-white/10 bg-black/40 px-3 py-2 text-white focus:border-white/40 focus:outline-none" })] }), _jsxs("label", { className: "flex flex-col gap-2 text-sm", children: [_jsx("span", { className: "text-white/70", children: "Text color" }), _jsx("input", { type: "color", value: subtitleStyle.color, onChange: (event) => void updateStyle({ color: event.target.value }), className: "h-10 w-full cursor-pointer rounded-md border border-white/10 bg-black/40" })] }), _jsxs("label", { className: "flex flex-col gap-2 text-sm", children: [_jsx("span", { className: "text-white/70", children: "Background" }), _jsx("input", { type: "text", value: subtitleStyle.bgColor, onChange: (event) => void updateStyle({ bgColor: event.target.value }), className: "rounded-md border border-white/10 bg-black/40 px-3 py-2 text-white focus:border-white/40 focus:outline-none", placeholder: "rgba(0,0,0,0.35)" })] }), _jsxs("label", { className: "flex items-center gap-3 text-sm", children: [_jsx("input", { type: "checkbox", checked: subtitleStyle.outline, onChange: (event) => void updateStyle({ outline: event.target.checked }), className: "h-4 w-4 rounded border-white/20 bg-black/60" }), _jsx("span", { className: "text-white/70", children: "Outline text" })] }), _jsxs("label", { className: "flex items-center gap-3 text-sm", children: [_jsx("input", { type: "checkbox", checked: subtitleStyle.shadow, onChange: (event) => void updateStyle({ shadow: event.target.checked }), className: "h-4 w-4 rounded border-white/20 bg-black/60" }), _jsx("span", { className: "text-white/70", children: "Drop shadow" })] })] })] }), _jsxs("section", { className: "space-y-4", children: [_jsx("h2", { className: "text-xl font-semibold", children: "Highlight Colors" }), _jsxs("div", { className: "grid gap-4 md:grid-cols-2", children: [_jsxs("label", { className: "flex flex-col gap-2 text-sm", children: [_jsx("span", { className: "text-white/70", children: "Exact match" }), _jsx("input", { type: "color", value: highlightColors.exact, onChange: (event) => void updateHighlights({ exact: event.target.value }), className: "h-10 w-full cursor-pointer rounded-md border border-white/10 bg-black/40" })] }), _jsxs("label", { className: "flex flex-col gap-2 text-sm", children: [_jsx("span", { className: "text-white/70", children: "Variant match" }), _jsx("input", { type: "color", value: highlightColors.variant, onChange: (event) => void updateHighlights({ variant: event.target.value }), className: "h-10 w-full cursor-pointer rounded-md border border-white/10 bg-black/40" })] })] })] }), _jsxs("section", { className: "space-y-2", children: [_jsx("h2", { className: "text-xl font-semibold", children: "Preview" }), _jsxs("div", { className: "rounded-lg border border-white/10 bg-black/60 p-4 text-center text-lg", style: {
                            fontFamily: subtitleStyle.fontFamily,
                            fontSize: subtitleStyle.fontSizePx,
                            fontWeight: subtitleStyle.fontWeight,
                            lineHeight: subtitleStyle.lineHeight,
                            color: subtitleStyle.color,
                            textShadow: subtitleStyle.shadow ? "0 2px 8px rgba(0,0,0,0.8)" : "none",
                            WebkitTextStroke: subtitleStyle.outline ? "1px rgba(0,0,0,0.9)" : "0",
                            background: subtitleStyle.bgColor,
                        }, children: ["Subtitle preview with ", _jsx("span", { style: { background: highlightColors.exact }, children: "exact" }), " and", _jsx("span", { style: { background: highlightColors.variant, marginLeft: 8 }, children: "variant" }), " highlights."] })] })] }));
}
//# sourceMappingURL=SettingsPage.js.map